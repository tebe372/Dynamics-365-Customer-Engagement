---
title: "Export and import record routing data | MicrosoftDocs"
description: "Learn to export and import data pertaining to records enabled for unified routing from source to target environments in Omnichannel for Customer Service."
ms.date: 04/04/2022
ms.topic: article
author: neeranelli
ms.author: nenellim
manager: shujoshi
ms.reviewer: nenellim
---

# Export and import data for record channel

By using the Configuration Migration tool, you can migrate the unified routing related configurations from the source organization to the target organization for the records that are configured to use unified routing.

For information on how to use the Configuration Migration tool, see the following articles:

- [Download Configuration Migration Tool](/powerapps/developer/data-platform/download-tools-nuget)
- [How the Configuration Migration tool works](/power-platform/admin/manage-configuration-data)

## Prerequisites

The following prerequisites must be met:

- In the source organization, if unified routing ruleset refers to custom entities, attributes, relationships, option sets or lookup values, then ensure that they exist in the target organization before you proceed with the migration.
- Ensure that the user who performs the migration has the required privileges on the following unified routing-related entities in the source and target organizations:
  - Characteristic (characteristic)
  - Rating Model (ratingmodel)
  - Rating Value (ratingvalue)
  - Capacity Profile (msdyn_capacityprofile)
  - Queue (queue)
  - Decision contract (msdyn_decisioncontract)
  - Decision rule set (msdyn_decisionruleset)
  - Assignment Configuration (msdyn_assignmentconfiguration)
  - Assignment Configuration Step (msdyn_assignmentconfigurationstep)
  - Master Entity Routing Configuration (msdyn_masterentityroutingconfiguration)
  - Workstream (msdyn_liveworkstream)
  - Routing configuration (msdyn_routingconfiguration)
  - Routing configuration step (msdyn_routingconfigurationstep)
  - Workstream capacity profile (msdyn_liveworkstreamcapacityprofile)

## Export and import data for the record channel

Perform the steps in the order listed to export and import the configuration from the source to the target organization. Use the information in the sections for each type of data and refer to the corresponding sample schemas for each type of configuration to fetch the required records.

1. Export and import data for skill-based routing
1. Export and import data for capacity profiles
1. Export and import data for unified routing-based record queues
1. Export and import intake rules for records
1. Export and import unified routing-based record workstreams

## Considerations for export and import of data

[!INCLUDE[ur-migration considerations](../includes/cc-ur-migration-considerations.md)]


> [!IMPORTANT]
> The migration of the following items is not in scope:
> 
> - Intelligent skill finder
> - Effort estimation for routing
> - Sentiment prediction for routing
> - Operating hours
> - Role Persona Mapping
> - Notification template
> - Session template
> - Presence
> - Queue membership

## Export and import data for skill-based routing

If skill-based routing rulesets are used in your unified routing setup, perform the steps to migrate the corresponding configuration.

**Sample schema**

[Sample schema for skill-based routing](https://github.com/microsoft/Dynamics365-Apps-Samples/tree/master/customer-service/unified-routing-sample-schemas/Sample%20schema%20for%20skill-based%20routing.xml) to get all the required records.


**To migrate the skill-based routing data**

1. Use the Configuration Migration tool to create the schema and export data in source organization for skill-based routing configuration.
  
  - **Entity display name**: When you create the schema, select the entities in the sequence that's mentioned in the table.
  - **Attribute display name**: We recommend that you select the attributes defined in the following table. You don't need to select the out-of-the-box system defined attributes, such as Created By, Created On, Modified By, Modified On, and Owner. You can select custom attributes if required.

    |Entity display name (Logical name)  |Attribute display name (Logical name)  |Use FetchXML to filter records  |
    |---------|---------|---------|
    |Characteristic (characteristic)    | <ul><li>Characteristic Type (characteristictype)</li><li>Characteristic (characteristicid)</li><li>Description (description)</li><li>Name (name)</li></ul> |         |
    |Rating Model (ratingmodel)     |<ul><li>Max Rating Value (maxratingvalue)</li><li>Min Rating Value (minratingvalue)</li><li>Name (name)</li><li>Rating Model (ratingmodelid)</li></ul>         |         |
    |Rating Value (ratingvalue)     | <ul><li>Name (name)</li><li>Rating Model (ratingmodel)</li><li>Rating Value (ratingvalueid)</li><li>Value (value)</li></ul> |         |
    |   |         |         |

1. Generate the schema and save it.

1. Export the data and generate the compressed (zip) file.

1. Use the Configuration Migration tool, and select the option to import data to the target organization.

   > [!NOTE]
   > You need to manually create bookableresourcecharacteristictype (Global option set value) in the target organization if required.

## Export and import data for capacity profiles

If you have configured capacity profiles in your unified routing setup, perform the steps to migrate the corresponding configuration.

**Sample schema**

[Sample schema for capacity profiles](https://github.com/microsoft/Dynamics365-Apps-Samples/tree/master/customer-service/unified-routing-sample-schemas/Sample%20schema%20for%20capacity%20profiles.xml) to get all the required records.

**To migrate the capacity profiles data**

1. Use the Configuration Migration tool to create the schema and export data in source organization for capacity profiles configuration.

    [!INCLUDE[ur-migration](../includes/cc-ur-migration.md)]

    |Entity display name (Logical name)  |Attribute display name (Logical name)  |Use FetchXML to filter records  |
    |---------|---------|---------|
    |Capacity Profile (msdyn_capacityprofile)     | <ul><li>Block Assignment (msdyn_blockassignment)</li><li> Capacity Profile (msdyn_capacityprofileid)</li><li>-Default Max Units (msdyn_defaultmaxunits)</li>-Name (msdyn_name)</li><li> Reset Duration </li><li>(msdyn_resetduration)</li><li>Unique Name (msdyn_uniquename)</li></ul> | **1. For all capacity profile records**<br>`  <fetch>` <br>  `<entity name="msdyn_capacityprofile">` <br>`<filter type="and">`<br>`<condition attribute="ismanaged" operator="eq" value="0" />`<br>`</filter>`<br>`</entity>`<br>  `</fetch>`<br><br> **2. For a single capacity profile record** <br> `<fetch>` <br>`<entity name="msdyn_capacityprofile">`<br>`<filter type="and">`<br>`<condition attribute="msdyn_capacityprofileid" operator="eq" uiname="Demo Capacity Profile 1" uitype="msdyn_capacityprofile" value="{F57CFE3C-14BD-D53E-F423-A1E7F9749DFB}" />`<br> `</filter>`<br> `</entity>`<br> `</fetch>` <br><br> **3. For multiple capacity profile records** <br> `<fetch>`<br> `<entity name="msdyn_capacityprofile">`<br> `<filter type="and">` <br> `<condition attribute="msdyn_capacityprofileid" operator="in">`<br>`<value uiname="Demo Capacity Profile 1" uitype="msdyn_capacityprofile">{F57CFE3C-14BD-D53E-F423-A1E7F9749DFB}</value>`<br> `<value uiname="Demo Capacity Profile 2" uitype="msdyn_capacityprofile">{D0B8ABFB-4A9F-0B1F-6FF4-8003E29A623C}</value>`<br>`</condition>`<br>`</filter>`<br>`</entity>`<br>`</fetch>` |
    |     |         |         |

1. Generate the schema and save it.

1. Export the data and generate the compressed (zip) file.

1. Use the Configuration Migration tool, and select the option to import data to the target organization.

## Export and import data for unified routing-based record queues

 > [!NOTE]
 > If you are using the out-of-the-box assignment methods for queues, such as highest capacity and round robin, skip the following entities that are listed in step 1 and proceed to step 2.
 >
 > - Decision rule set
 > - Assignment configuration
 > - Assignment configuration step

**Sample schema**

[Sample schema for unified routing-based record queues](https://github.com/microsoft/Dynamics365-Apps-Samples/tree/master/customer-service/unified-routing-sample-schemas/Sample%20schema%20for%20unified%20routing%20record%20queues.xml) to get all the required records.


**To migrate the unified routing-based record queues**

1. Use the Configuration Migration tool to create the schema and export data from the source organization for unified routing-based record queues configuration.

    [!INCLUDE[ur-migration](../includes/cc-ur-migration.md)]
    - **Configure import settings**: For the Decision contract entity, ensure that you select the **Do not update existing records** checkbox.


    |SN.| Entity display name (Logical name)  |Attribute display name (Logical name)  |Use FetchXML to filter records  |
    |-----|---------|---------|---------|
    | 1. | Queue (queue) |  <ul><li>Assignment Input Contract Id (msdyn_assignmentinputcontractid)</li><li>Assignment Strategy (msdyn_assignmentstrategy) </li> <li> Description (description) </li><li> Is Default Queue (msdyn_isdefaultqueue) </li><li> Is Omnichannel queue (msdyn_isomnichannelqueue) </li><li> Name (name) </li><li> Priority (msdyn_priority) </li><li> Queue (queueid) </li><li> Queue type (msdyn_queuetype) </li><li> Type (queueviewtype) </li></ul>  |  [**1. All queues for unified routing-based record**](#BKMK1all-ur-qs) <br> [**2. Single queue for unified routing-based record**](#BKMK2single-ur-qs) <br> **3. Multiple queues for unified routing-based records** <br> <br> `<fetch>` <br> `<entity name="queue">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `</entity>` <br> `</fetch>`  |
    | 2. | Decision contract (msdyn_decisioncontract)  |  <ul> <li>Contract definition (msdyn_contractdefinition)</li> <li>Decision contract (msdyn_decisioncontractid) </li> <li>Name (msdyn_name) </li> <li>Unique name (msdyn_uniquename) </li> </ui>  |  **1. Decision contract for all unified routing-based record queues** <br> <br> `<fetch distinct="true">` <br>  `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_queuetype" entityname="aw" operator="eq" value="192350001" />`  <br> `<condition attribute="msdyn_isomnichannelqueue" entityname="aw" operator="eq" value="1" />` <br> `<condition attribute="queueid" entityname="aw" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />`  <br> `</filter>`  <br> `<filter type="and">` <br> `<condition attribute="msdyn_isomnichannelqueue" entityname="be" operator="eq" value="1" />` <br> `<condition attribute="msdyn_queuetype" entityname="be" operator="eq" value="192350001" />`  <br> `<condition attribute="queueid" entityname="be" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_isomnichannelqueue" entityname="bm" operator="eq" value="1" />` <br> `<condition attribute="msdyn_queuetype" entityname="bm" operator="eq" value="192350001" />` <br> `<condition attribute="queueid" entityname="bm" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="queue" from="msdyn_assignmentinputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="aw">` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bb">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bc">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="outer" alias="bd">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="outer" alias="be">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br>  `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bj">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bk">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="outer" alias="bl">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="outer" alias="bm">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>  **2. Decision contract for a single unified routing-based record queue** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="queueid" entityname="aw" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="queueid" entityname="be" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="queueid" entityname="bm" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="queue" from="msdyn_assignmentinputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="aw">` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bb">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bc">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="outer" alias="bd">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="outer" alias="be">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bj">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bk">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="outer" alias="bl">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="outer" alias="bm">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br> **3. Decision contract for multiple unified routing-based record queues** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="queueid" entityname="aw" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="queueid" entityname="be" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="queueid" entityname="bm" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="queue" from="msdyn_assignmentinputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="aw">` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bb">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bc">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="outer" alias="bd">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="outer" alias="be">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bj">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bk">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="outer" alias="bl">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="outer" alias="bm">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` |
    | 3. |  Decision rule set (msdyn_decisionruleset)  |  <ul><li>AI builder model (msdyn_aibmodelid)</li><li>Authoring mode (msdyn_authoringmode)</li><li>Decision rule set (msdyn_decisionrulesetid)</li><li>Description (msdyn_description)</li><li>Input contract (msdyn_inputcontractid)</li><li>Is input collection (msdyn_isinputcollection)</li><li>ML model type - (msdyn_mlmodeltype)</li><li>Name (msdyn_name)</li><li>Output contract (msdyn_outputcontractid)</li><li>Rule set definition (msdyn_rulesetdefinition)</li><li>Rule set type (msdyn_rulesettype)</li><li>Unique name (msdyn_uniquename)</li></ul>  |  **1. Decision ruleset for all unified routing-based record queues** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="inner" alias="am">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="inner" alias="an">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="ao">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_queuetype" operator="eq" value="192350001" />` <br> `<condition attribute="msdyn_isomnichannelqueue" operator="eq" value="1" />` <br> `<condition attribute="queueid" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br> **2. Decision ruleset for a single unified routing-based record queue** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="inner" alias="am">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="inner" alias="an">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="ao">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br> **3. Decision ruleset for multiple unified routing-based record queues** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<link-entity name="msdyn_assignmentconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="inner" alias="am">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="inner" alias="an">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="ao">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>  |
    | 4. |  Assignment Configuration (msdyn_assignmentconfiguration)  |  <ul><li>Assignment Configuration (msdyn_assignmentconfigurationid)</li><li>Description (msdyn_description)</li><li>Is Active Configuration (msdyn_isactiveconfiguration)</li><li>Name (msdyn_name)</li><li>Queue (msdyn_queueid)</li><li>Unique Name (msdyn_uniquename)</li></ul>  |  **1. Assignment configuration for all unified routing-based record queues** <br><br>`<fetch>`<br><br>`<entity name="msdyn_assignmentconfiguration">`<br>`<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="bi">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_queuetype" operator="eq" value="192350001" />` <br> `<condition attribute="msdyn_isomnichannelqueue" operator="eq" value="1" />` <br> `<condition attribute="queueid" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**2. Assignment configuration for a single unified routing-based-record queue**<br> <br>`<fetch>` <br> `<entity name="msdyn_assignmentconfiguration">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="bi">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>`<br> <br>**3. Assignment configuration for multiple unified routing-based record queues**<br> <br>`<fetch>` <br> `<entity name="msdyn_assignmentconfiguration">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="bi">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>   |
    | 5. |  Assignment Configuration Step (msdyn_assignmentconfigurationstep)  |  <ul><li>Assignment Configuration (msdyn_assignmentconfigurationid)</li><li>Assignment Configuration Step (msdyn_assignmentconfigurationstepid)</li><li>Is default ruleset (msdyn_isdefaultruleset)</li><li>Name (msdyn_name)</li><li>Rule Set (msdyn_rulesetid)</li><li>Rule Set - (msdyn_rulesetid)</li><li>Step Order (msdyn_steporder)</li><li>Step Type (msdyn_type)</li><li>Unique Name (msdyn_uniquename)</li></ul>  |  **1. Assignment configuration step for all unified routing-based record queues**<br> <br>`<fetch>` <br> `<entity name="msdyn_assignmentconfigurationstep">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="inner" alias="bq">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="br">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_queuetype" operator="eq" value="192350001" />` <br> `<condition attribute="msdyn_isomnichannelqueue" operator="eq" value="1" />` <br> `<condition attribute="queueid" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br> **2. Assignment configuration step for a single unified routing-based record queue**<br> <br>`<fetch>` <br> `<entity name="msdyn_assignmentconfigurationstep">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="inner" alias="bq">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="br">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br> **3. Assignment configuration step for multiple unified routing-based record queues**<br> <br>`<fetch>` <br> `<entity name="msdyn_assignmentconfigurationstep">` <br> `<link-entity name="msdyn_assignmentconfiguration" from="msdyn_assignmentconfigurationid" to="msdyn_assignmentconfigurationid" link-type="inner" alias="bq">` <br> `<link-entity name="queue" from="queueid" to="msdyn_queueid" link-type="inner" alias="br">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>   |
    |||||


1. Generate the schema and save it.

1. Export the data and generate the compressed (zip) file.

1. Extract the zip file, open the data.xml file present in the extracted folder, and perform the following operations:

   1. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_assignmentoutput'

   1. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization  with the msdyn_decisioncontractid GUID of the target organization.

   1. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_selectionruleoutput'

   1. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization  with the msdyn_decisioncontractid GUID of the target organization.

1. Package the extracted content again.

1. Use the Configuration Migration tool, and select the option to import data into the target organization.

> [!Important]
> If you want to rename a queue in the target organization after a successful import for queues and import again, remove the following line from the sample schema xml and data. `<field displayname="Queue type" name="msdyn_queuetype" type="optionsetvalue" customfield="true" />`

### FetchXML for queues

<a name="BKMK1all-ur-qs"></a>

```
<fetch> 
   <entity name="queue">
    <filter type="and">
      <condition attribute="msdyn_queuetype" operator="eq" value="192350001" />
      <condition attribute="msdyn_isomnichannelqueue" operator="eq" value="1" />
      <condition attribute="queueid" operator="ne" uiname="Default entity queue" uitype="queue" value="{5A4B76B0-DAB5-4717-9743-9490F2F822C6}" />
    </filter>
  </entity>
</fetch>
```
<a name="BKMK2single-ur-qs"></a>
     **2. Single queue for unified routing-based record** <br> <br> `<fetch>`<br> `<entity name="queue">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="eq" uiname="Test Record Queue 1" uitype="queue" value="{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}" />` <br>` </filter>` <br> `</entity>` <br> `</fetch>` <br> <br> **3. Multiple queues for unified routing-based records** <br> <br> `<fetch>` <br> `<entity name="queue">` <br> `<filter type="and">` <br> `<condition attribute="queueid" operator="in">` <br> `<value uiname="Test Record Queue 1" uitype="queue">{A5ED5CAA-3A54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `<value uiname="Test Record Queue 2" uitype="queue">{B2862B31-3B54-EC11-8F8F-000D3A1CBB9E}</value>` <br> `</condition>` <br> `</filter>` <br> `</entity>` <br> `</fetch>`

## Export and import intake rules for records

**Sample schema**

[Sample schema for intake rules for record routing](https://github.com/microsoft/Dynamics365-Apps-Samples/tree/master/customer-service/unified-routing-sample-schemas/Sample%20schema%20intake%20rules%20for%20record%20routing.xml) to get all the required records.

**To migrate the unified routing-based intake rules for records**

1. Use the Configuration Migration tool to create the schema and export data from the source organization for an empty record routing configuration. 
   
    - If in the target organization, a record routing hub exists for the record type that you want to migrate, then do one of the following steps:
      
       - Delete the record routing hub and in Intake Data.xml, remove the attribute msdyn_rulesetdefinition from the entity msdyn_decisionruleset.
       - Keep the value of msdyn_rulesetdefinition as empty.
  
    [!INCLUDE[ur-migration](../includes/cc-ur-migration.md)]
    - **Configure import settings**: For the Decision contract entity, ensure that you select the **Do not update existing records** checkbox.
   
    | SN.| Entity display name (Logical name)  |Attribute display name (Logical name)  |Use FetchXML to filter records  |
    |-----|---------|---------|---------|
    | 1. | Decision contract (msdyn_decisioncontract) |  <ul><li>Contract definition (msdyn_contractdefinition)</li><li>Decision contract (msdyn_decisioncontractid) </li><li>Name (msdyn_name) </li><li>Unique name (msdyn_uniquename) </li></ul>  |  **1. Decision contract for all routed records** `<br> `<br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="not-null" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="not-null" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bo">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="outer" alias="bp" />` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer"alias="bs">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="outer" alias="bt" />` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br> **2. Decision contract for the incident entity**<br> **Note:** Update the entity logical name in the sample code to migrate entities other than incident.<br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="eq" value="incident" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="eq" value="incident" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bo">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="outer" alias="bp" />` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bs">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="outer" alias="bt" />` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> `<br> **3. Decision Contract for the incident and task entities** `<br>`<br>` <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="eq" value="incident" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="eq" value="incident" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="eq" value="task" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="eq" value="task" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bo">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="outer" alias="bp" />` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bs">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="outer" alias="bt" />` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>  |
    | 2. |  Decision rule set (msdyn_decisionruleset)  |  <ul><li>AI builder model (msdyn_aibmodelid)</li><li> Authoring mode (msdyn_authoringmode) </li><li> Decision rule set (msdyn_decisionrulesetid) </li><li> Description (msdyn_description) </li><li>  Input contract (msdyn_inputcontractid) </li><li>  Is input collection (msdyn_isinputcollection) </li><li> ML model type (msdyn_mlmodeltype) </li><li> Name (msdyn_name) </li><li> Output contract (msdyn_outputcontractid) </li><li>  Rule set definition (msdyn_rulesetdefinition) </li><li>  Rule set type (msdyn_rulesettype) </li><li> Unique name (msdyn_uniquename) </li></ul> |  **1. Decision ruleset for all routed records** <br><br>`<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="inner" alias="cp">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" operator="not-null" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> **2. Decision ruleset for the incident entity** `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="inner" alias="cp">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" operator="eq" value="incident" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br><br> **3. Decision ruleset for the incident and task entities** <br> <br>`<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" linktype="inner" alias="cp">` <br> `<filter type="and">` <br> `<filter type="or">` <br> `<condition attribute="msdyn_entitylogicalname" operator="eq" value="incident" />` <br> `<condition attribute="msdyn_entitylogicalname" operator="eq" value="task" />` <br> `</filter>` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>`  |
    | 3. | Master Entity Routing Configuration (msdyn_masterentityroutingconfiguration) | <ul><li>Entity (msdyn_- entitylogicalname) </li><li> Master Entity Routing Configuration (msdyn_masterentityroutingconfigurationid) </li><li> Name (msdyn_name) </li><li> Rule set (msdyn_rulesetid) </li><li> Unique Name (msdyn_uniquename) </li></ul> |  **1. Master entity routing configuration for a routed records** <br> <br> `<fetch>` <br> `<entity name="msdyn_masterentityroutingconfiguration">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" operator="not-null" />` <br> `</filter>` <br> `</entity>` <br> `</fetch>` <br> <br> **2. Master entity routing configuration for the incident entity** <br> <br> `<fetch>` <br> `<entity name="msdyn_masterentityroutingconfiguration">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" operator="eq" value="incident" />` <br> `</filter>` <br> `</entity>` <br> `</fetch>` <br> <br> **3. Master entity routing configuration for the incident and task entities** <br> <br> `<fetch>` <br> `<entity name="msdyn_masterentityroutingconfiguration">` <br> `<filter type="and">` <br> `<filter type="or">` <br> `<condition attribute="msdyn_entitylogicalname" operator="eq" value="incident" />` <br> `<condition attribute="msdyn_entitylogicalname" operator="eq" value="task" />` <br> `</filter>` <br> `</filter>` <br> `</entity>` <br> `</fetch>`   |
    |||||

2. Generate the schema and save it.

3. Export the data and generate the compressed (zip) file.

4. Extract the zip file, open the data.xml file present in the extracted folder, and perform the following operations:

   1. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_baseoutputcontractmasterentityroutingconfiguration'

   2. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization with the msdyn_decisioncontractid GUID of the target organization.

   3. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_baseoutputcontractmasterentityroutingconfigurationunifiedrouting'

   4. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization  with the msdyn_decisioncontractid GUID of the target organization.

5. Package the extracted content again.

6. Use the Configuration Migration tool, and select the option to import data into the target organization.


## Export and import unified routing-based record workstreams

**Sample schema**

[Sample schema for unified routing record workstream](https://github.com/microsoft/Dynamics365-Apps-Samples/tree/master/customer-service/unified-routing-sample-schemas/Sample%20schema%20for%20unified%20routing%20record%20workstreams.xml) to get all the required records.

**To migrate the unified routing-based record workstreams**

1. Use the Configuration Migration tool to create the schema and export data from the source organization for unified routing-based record workstreams.

    [!INCLUDE[ur-migration](../includes/cc-ur-migration.md)]
    - **Configure import settings**: For the Decision contract entity, ensure that you select the **Do not update existing records** checkbox.
    
    > [!NOTE]
    > If you want to migrate workstreams pertaining to a specific record type, use the Fetchxml query mentioned in **Option 3** for all the entities in the following table.

    | SN | Entity display name (Logical name)  | Attribute display name (Logical name)  | Use FetchXML to filter records  |
    |-----|---------|---------|---------|
    | 1. |  Work Stream (msdyn_liveworkstream)  |  <ul><li>Allow Automated Messages (msdyn_enableautomatedmessages)</li> <li> </li> <li>Allowed Presences (msdyn_allowedpresences)</li> <li>Assign WorkItem After Decline or Timeout (msdyn_assignworkitemafterdecline)</li> <li>Auto-close after inactivity (msdyn_autocloseafterinactivity)</li> <li>Block capacity for wrap up state (msdyn_blockcapacityforwrapup)</li> <li>Bot queue (msdyn_bot_queue)</li> <li>Bot rule (msdyn_bot_rule)</li> <li>Bot user (msdyn_bot_user)</li> <li>Capacity (msdyn_capacityrequired)</li> <li>Capacity format (msdyn_capacityformat)</li> <li>Channel (msdyn_streamsource)</li> <li>Contract Id (msdyn_routingcontractid)</li> <li>Default (msdyn_sessiontemplate_default)</li> <li>Direction (msdyn_direction)</li> <li>Enable selecting from push-based work streams (msdyn_enableselectingfrompushbasedworkstreams)</li> <li>Entity (msdyn_masterentityroutingconfigurationid)</li> <li>FallBack Language (msdyn_fallbacklanguage)</li> <li>Follow-up after waiting (msdyn_followupafterwaiting)</li> <li>Handling Time Threshold (msdyn_handlingtimethreshold)</li> <li>Incoming authenticated (msdyn_notificationtemplate_incoming_auth)</li> <li>Is Default (msdyn_isdefault)</li> <li>Keep same agent for entire conversation (msdyn_enableagentaffinity)</li> <li>Matching Logic (msdyn_matchinglogic)</li> <li>Max Concurrency (msdyn_maxconcurrentconnection)</li> <li>Mode (msdyn_mode)</li> <li>Name (msdyn_name)</li> <li>Notification (msdyn_notification)</li> <li>Outbound queue (msdyn_outboundqueueid)</li> <li>Record Identification Rule (msdyn_recordidentificationrule)</li> <li>Record Identification Validation Rule (msdyn_recordidentificationvalidationrule)</li> <li>Screen pop timeout (msdyn_screenpoptimeout)</li> <li>Screen pop timeout (msdyn_screenpoptimeout_optionSet)</li> <li>Skill Attachment Rules Count (msdyn_skillattachmentrulescount)</li> <li>Skill Attachment Rules Count (Last Updated On) (msdyn_skillattachmentrulescount_date)</li> <li>Skill Attachment Rules Count (State) (msdyn_skillattachmentrulescount_state)</li> <li>Waiting Time Threshold (msdyn_waitingtimethreshold)</li> <li>Work Distribution Mode (msdyn_workdistributionmode)</li> <li>Work Stream (msdyn_liveworkstreamid)</li> </ui>  |    **Option 1: All unified routing-based record workstreams** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_liveworkstream">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" operator="eq" value="192350000" />` <br> `</filter>` <br> `</entity>` <br> `</fetch>` <br> <br> **Option 2: Single unified routing-based record workstream**<br> <br> `<fetch>` <br> `<entity name="msdyn_liveworkstream">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream" value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}" />` <br> `</filter>` <br> `</entity>` <br> `</fetch>` <br> <br> **Option 3: Multiple unified routing-based record workstreams** <br> <br> `<fetch version="1.0" mapping="logical" distinct="false">` <br> `<entity name="msdyn_liveworkstream">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `</entity>` <br> `</fetch>` <br>  |
    | 2. |  Decision contract (msdyn_decisioncontract)  |  <ul><li>Contract definition (msdyn_contractdefinition) </li> <li>- Decision contract (msdyn_decisioncontractid) </li> <li>- Name (msdyn_name) </li> <li>- Unique name (msdyn_uniquename) </li> </ul>  |  **Option 1: Decision contract for all unified routing-based record workstreams** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" entityname="an" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" entityname="an" operator="eq" value="192350000" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" entityname="bd" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" entityname="bd" operator="eq" value="192350000" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="not-null" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="not-null" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_routingcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="an">` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="ba">` <br> `<link-entity name="msdyn_routingconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bb">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="outer" alias="bc">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="outer" alias="bd">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bo">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bp" />` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bs">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bt" />` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> **Option 2: Decision contract for a single unified routing-based record workstream of type = incident** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" entityname="an" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream" value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" entityname="bd" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream" value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="eq" value="incident" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="eq" value="incident" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_routingcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="an">` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="ba">` <br> `<link-entity name="msdyn_routingconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bb">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="outer" alias="bc">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="outer" alias="bd">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bo">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bp" />` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bs">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bt" />` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> **Option 3: Decision contract for multiple unified routing-based record workstreams of type = incident and type = task** <br> <br>`<fetch distinct="true">` <br> `<entity name="msdyn_decisioncontract">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" entityname="an" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" entityname="bd" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="eq" value="incident" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="eq" value="incident" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bp" operator="eq" value="task" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="bt" operator="eq" value="task" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_routingcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="an">` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="ba">` <br> `<link-entity name="msdyn_routingconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bb">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="outer" alias="bc">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="outer" alias="bd">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_inputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bo">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bp" />` <br> `</link-entity>` <br> `<link-entity name="msdyn_decisionruleset" from="msdyn_outputcontractid" to="msdyn_decisioncontractid" link-type="outer" alias="bs">` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="bt" />` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>   |
    | 3. |  Decision rule set (msdyn_decisionruleset)  |  <ul><li> AI builder model (msdyn_aibmodelid)</li><li> Authoring mode (msdyn_authoringmode) </li><li> Decision rule set (msdyn_decisionrulesetid) </li><li>Description (msdyn_description) </li><li>Input contract (msdyn_inputcontractid) </li><li>Is input collection (msdyn_isinputcollection) </li><li>-ML model type (msdyn_mlmodeltype) </li><li>Name (msdyn_name) </li><li>-Output contract (msdyn_outputcontractid) </li><li>Rule set definition (msdyn_rulesetdefinition) </li><li>Rule set type (msdyn_rulesettype) </li><li>Unique name (msdyn_uniquename) </li></ul>  |  **1. Decision ruleset for all unified routing-based record workstreams** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" entityname="af" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" entityname="af" operator="eq" value="192350000" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="dc" operator="not-null" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_routingconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="ad">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="outer" alias="ae">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="outer" alias="af">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="dc">` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br></li> **2. Decision ruleset for a single unified routing-based record workstream of type = incident** <br> <br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" entityname="af" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream"value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}" />` <br> `</filter>` <br> `<filter type="and">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="dc" operator="eq" value="incident" />` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_routingconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="ad">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="outer" alias="ae">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="outer" alias="af">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="dc">` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br></li> **3. Decision ruleset for multiple unified routing-based record workstreams type = incident and type = task** <br><br> `<fetch distinct="true">` <br> `<entity name="msdyn_decisionruleset">` <br> `<filter type="or">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" entityname="af" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `<filter type="and">` <br> `<filter type="or">` <br> `<condition attribute="msdyn_entitylogicalname" entityname="dc" operator="eq" value="incident" />` <br> `<condition attribute="msdyn_entitylogicalname" entityname="dc" operator="eq" value="task" />` <br> `</filter>` <br> `</filter>` <br> `</filter>` <br> `<link-entity name="msdyn_routingconfigurationstep" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="ad">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="outer" alias="ae">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="outer" alias="af">` <br> `</link-entity>` <br> `</link-entity>` <br> `</link-entity>` <br> `<link-entity name="msdyn_masterentityroutingconfiguration" from="msdyn_rulesetid" to="msdyn_decisionrulesetid" link-type="outer" alias="dc">` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> **Note:** All the intake rules for the selected entity are migrated, therefore ensure that the corresponding workstreams are also migrated to the target organization.   |
    | 4. | Routing configuration (msdyn_routingconfiguration) |  <ul> <li> Is active configuration (msdyn_isactiveconfiguration) </li> <li>- Name (msdyn_name) </li> <li>- Routing configuration (msdyn_routingconfigurationid) </li> <li>- Unique name (msdyn_uniquename) </li> <li>-Work stream (msdyn_liveworkstreamid) </li> </ul>  |  **1. Routing configuration for all unified routing-based record workstreams** <br><br>`<fetch>` <br> `<entity name="msdyn_routingconfiguration">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="inner" alias="ah">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" operator="eq" value="192350000" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**2. Routing configuration for a single unified routing-based record workstream** <br> <br>`<fetch>` <br> `<entity name="msdyn_routingconfiguration">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="inner" alias="ah">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream" value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**3. Routing configuration for multiple unified routing-based record workstreams** <br><br>`<fetch>` <br> `<entity name="msdyn_routingconfiguration">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="inner" alias="ah">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>   |
    | 5. |  Routing configuration step (msdyn_routingconfigurationstep)  |  <ul><li> Name (msdyn_name) </li><li> Routing configuration (msdyn_routingconfigurationid) </li><li> Routing configuration step (msdyn_routingconfigurationstepid) </li><li> Rule set (msdyn_rulesetid) </li><li> Step order (msdyn_steporder) </li><li> Step type (msdyn_type) </li><li> Unique name (msdyn_uniquename) </li></ul>  |  **1. Routing configuration step for all unified routing-based record workstreams** <br><br>`<fetch>` <br> `<entity name="msdyn_routingconfigurationstep">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="inner" alias="ak">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="inner" alias="al">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" operator="eq" value="192350000" />` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**2. Routing configuration step for a single unified routing-based record workstream** <br><br>`<fetch>` <br> `<entity name="msdyn_routingconfigurationstep">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="inner" alias="ak">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="inner" alias="al">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream" value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}"/>` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**3. Routing configuration step for multiple unified routing-based record workstreams** <br><br>`<fetch>` <br> `<entity name="msdyn_routingconfigurationstep">` <br> `<link-entity name="msdyn_routingconfiguration" from="msdyn_routingconfigurationid" to="msdyn_routingconfigurationid" link-type="inner" alias="ak">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_liveworkstreamid" link-type="inner" alias="al">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `</link-entity>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>   |
    | 6. |  Work stream capacity profile (msdyn_liveworkstreamcapacityprofile)  |  <ul><li> Capacity Profile (msdyn_capacityprofile_id)</li><li>- Name (msdyn_name) </li><li>-Work Stream (msdyn_workstream_id) </li><li>-Work stream Capacity profile (msdyn_liveworkstreamcapacityprofileid)</li></ul>  | **1.Workstream capacity profile for all unified routing-based record workstreams** <br><br>`<fetch>` <br> `<entity name="msdyn_liveworkstreamcapacityprofile">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_workstream_id" link-type="inner" alias="am">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_mode" operator="eq" value="717210001" />` <br> `<condition attribute="msdyn_streamsource" operator="eq" value="192350000" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**2. Workstream capacity profile for a single unified routing-based record workstream**<br><br>`<fetch>` <br> `<entity name="msdyn_liveworkstreamcapacityprofile">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_workstream_id" link-type="inner" alias="am">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="eq" uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream" value="{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}" />` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br> <br>**3. Workstream capacity profile for multiple unified routing-based record workstreams** <br><br>`<fetch>` <br> `<entity name="msdyn_liveworkstreamcapacityprofile">` <br> `<link-entity name="msdyn_liveworkstream" from="msdyn_liveworkstreamid" to="msdyn_workstream_id" link-type="inner" alias="am">` <br> `<filter type="and">` <br> `<condition attribute="msdyn_liveworkstreamid" operator="in">` <br> `<value uiname="Test Record Workstream Case 1" uitype="msdyn_liveworkstream">{759255C7-7AC8-98E0-7E3E-59A7F0312EFC}</value>` <br> `<value uiname="Test Record Workstream Task 1" uitype="msdyn_liveworkstream">{E6246229-33AC-5A9E-2FFE-51668AD44215}</value>` <br> `</condition>` <br> `</filter>` <br> `</link-entity>` <br> `</entity>` <br> `</fetch>` <br>   |
    |||||

2. Generate the schema and save it.

3. Export the data and generate the compressed (zip) file.

4. Extract the zip file, open the data.xml file present in the extracted folder, and perform the following operations:

   1. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_baseoutputcontractmasterentityroutingconfiguration'

   2. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization  with the msdyn_decisioncontractid GUID of the target organization.

   3. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_baseoutputcontractmasterentityroutingconfigurationunifiedrouting'

   4. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization with the msdyn_decisioncontractid GUID of the target organization.
   
   5. In the source and target organizations, run the following OData API and note the `msdyn_decisioncontractid`.

      https://`<OrgURL>`/api/data/v9.0/msdyn_decisioncontracts?$select=msdyn_decisioncontractid&$filter=msdyn_uniquename eq 'msdyn_demandqueueidentificationoutput'

   6. In data.xml file, replace all the occurrences of the msdyn_decisioncontractid GUID in the source organization with the msdyn_decisioncontractid GUID of the target organization.

5. Package the extracted content again.

6. Use the Configuration Migration tool, and select the option to import data into the target organization.